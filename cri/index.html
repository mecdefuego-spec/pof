<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Flor con Luna y Montaña</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --flower-scale: 0.95;   /* escala de la flor (ajusta aquí) */
      --dome-scale: 1.00;     /* escala de la cúpula (ajusta aquí) */
      --mountain-height: 80vh;/* altura de la montaña responsive */
    }

    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at center, #422f52, #000);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Contenedor de estrellas (detrás de todo) */
    #stars {
      position: absolute;
      inset: 0;
      z-index: 0; /* detrás de luna (1), montana (2) y svg (3) */
      pointer-events: none;
    }

    .estrella {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.8;
      animation: titilar 3s infinite alternate;
      pointer-events: none;
      will-change: transform, opacity;
    }
    @keyframes titilar {
      from { opacity: 0.2; transform: scale(0.8); }
      to   { opacity: 1; transform: scale(1.2); }
    }

    /* Luna */
    .luna {
      position: absolute;
      top: 5vh;
      left: 50%;
      transform: translateX(-50%);
      width: 470px;
      height: 470px;
      background: rgb(246, 250, 196);
      border-radius: 50%;
      opacity: 0.9;
      z-index: 1; /* detrás de la montaña (2) */
      box-shadow: 0 0 60px rgba(255,255,255,0.06);
    }

    /* Montaña responsive */
    .montana {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 200vw;                 /* extiende para cubrir bordes */
      height: var(--mountain-height);/* controla la altura aquí */
      z-index: 2;                   /* encima de la luna */
      display: block;
      transform: translateX(-50vw); /* centra visualmente la forma al usar 200vw */
    }
    .montana svg { display:block; width:100%; height:100%; }
    .montana path { fill: rgb(23, 179, 23); }

    /* Capas de pasto animado al frente */
    .montana-capa {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 200vw;
      height: var(--mountain-height);
      pointer-events: none;
      transform: translateX(-50vw);
  z-index: 3;
    }

    /* SVG principal (cúpula + flor) encima de la montaña */
    .main-svg {
      position: relative;
      width: 420px;
      height: auto;
      z-index: 3; /* encima de la montaña */
      pointer-events: none;
    }

    /* Cúpula: permitimos transform CSS y origen (base) */
    .cristal {
      fill: rgba(255, 255, 255, 0.03);
      stroke: rgba(255, 255, 255, 0.7);
      stroke-width: 3;
      filter: drop-shadow(0 0 12px rgba(255,255,255,0.7));
      transform-box: fill-box;
      transform-origin: 50% 100%;
      transform: scale(var(--dome-scale));
    }

    /* pétalos, tallo, hoja */
    .petalo {
      fill: url(#gradPetalo);
      stroke: #b28900;
      stroke-width: 1;
    }
    .tallo {
      fill: none;
      stroke: #2e7d32;
      stroke-width: 4;
      stroke-linecap: round;
    }
    .hoja {
      fill: url(#gradHoja);
      stroke: #1b5e20;
      stroke-width: 1;
    }

    /* Flor: ✓ transform-box y uso de variable de escala en animación */
    .flor {
      transform-box: fill-box;               /* clave para que scale() funcione correctamente en SVG */
      transform-origin: 50% 75%;             /* origen centrado-horizontal, algo arriba de la base */
      transform: scale(var(--flower-scale));
      animation: ondular 11s ease-in-out infinite alternate;
      pointer-events: none;
    }
    @keyframes ondular {
      0%   { transform: scale(var(--flower-scale)) rotate(-2deg); }
      50%  { transform: scale(var(--flower-scale)) rotate(2deg); }
      100% { transform: scale(var(--flower-scale)) rotate(-2deg); }
    }

    /* Ajustes móviles */
    @media (max-width:480px){
      .main-svg { width: 320px; }
      .luna { width: 260px; height:260px; top:6vh; }
      .montana { height: 60vh; transform: translateX(-40vw); }
    }

  </style>
</head>
<body>

  <!-- Estrellas (contenedor en fondo) -->
  <div id="stars" aria-hidden="true"></div>

  <!-- LUNA -->
  <div class="luna" aria-hidden="true"></div>

  <!-- MONTAÑA RESPONSIVE (200vw para cubrir bien pantallas anchas; se centra con translateX) -->
  <div class="montana" aria-hidden="true">
    <svg viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M0 100 
               Q18 78 36 66 
               Q52 50 68 60 
               Q84 65 100 72 
               L100 100 L0 100 Z"/>
    </svg>
  </div>

  <!-- Capas de pasto animadas y cada vez más oscuras (al frente) -->
  <div id="capas-pasto" aria-hidden="true"></div>

  <!-- CÚPULA + FLOR (encima) -->
  <svg class="main-svg" viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Flor con cúpula">
    <defs>
      <radialGradient id="gradPetalo" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="#fff176"/>
        <stop offset="100%" stop-color="#fbc02d"/>
      </radialGradient>
      <radialGradient id="gradHoja" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="#81c784"/>
        <stop offset="100%" stop-color="#2e7d32"/>
      </radialGradient>
    </defs>

    <!-- Cúpula -->
  <!-- Cúpula con base ovalada (cilindro 3D) -->
  <ellipse cx="200" cy="455" rx="110" ry="32" fill="rgba(255,255,255,0.13)" stroke="rgba(255,255,255,0.7)" stroke-width="3"/>
  <path class="cristal" d="M90 455 a110 32 0 0 1 220 0 v-300 a110 110 0 0 0 -220 0 z"/>

    <!-- Flor -->
    <g class="flor" aria-hidden="true">
      <path class="tallo" d="M200 480 C210 380, 190 320, 200 240"/>
      <ellipse class="hoja" cx="175" cy="330" rx="22" ry="11" transform="rotate(-20 175 330)"/>
      <ellipse class="hoja" cx="225" cy="290" rx="22" ry="11" transform="rotate(30 225 290)"/>
      <circle class="petalo" cx="200" cy="220" r="18"/>
      <ellipse class="petalo" cx="190" cy="200" rx="14" ry="20" transform="rotate(-30 190 200)"/>
      <ellipse class="petalo" cx="210" cy="200" rx="14" ry="20" transform="rotate(30 210 200)"/>
      <ellipse class="petalo" cx="200" cy="190" rx="12" ry="18"/>
      <ellipse class="petalo" cx="185" cy="215" rx="16" ry="20" transform="rotate(-15 185 215)"/>
      <ellipse class="petalo" cx="215" cy="215" rx="16" ry="20" transform="rotate(15 215 215)"/>
    </g>
  </svg>

  <script>
    // Generar estrellas con titilación independiente y colores variados cercanos al blanco
    const starsContainer = document.getElementById('stars');
    const starColors = ["#ffffff", "#f8f8ff", "#e8f8ff", "#fff7f0", "#f4f4ff", "#f9f9f9", "#eaf6ff", "#f6faff"];
    function randomColor() {
      return starColors[Math.floor(Math.random() * starColors.length)];
    }
    for (let i = 0; i < 120; i++) {
      const star = document.createElement('div');
      star.className = 'estrella';
      const size = Math.random() * 2 + 0.6;
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      star.style.top = `${Math.random() * 100}vh`;
      star.style.left = `${Math.random() * 100}vw`;
      star.style.background = randomColor();
      // Parpadeo más notorio
      const minOpacity = 0.05 + Math.random() * 0.15;
      const maxOpacity = 0.85 + Math.random() * 0.15;
      // Animación personalizada para cada estrella
      const duration = 1.5 + Math.random() * 2.5;
      const delay = Math.random() * 5;
      star.style.animation = `titilar${i} ${duration}s infinite alternate`;
      star.style.animationDelay = `${delay}s`;
      // Crear keyframes únicos para cada estrella con mayor rango de opacidad y brillo
      const keyframes = document.createElement('style');
      keyframes.innerHTML = `@keyframes titilar${i} {
        0% { opacity: ${minOpacity}; filter: drop-shadow(0 0 2px ${randomColor()}); }
        50% { opacity: ${maxOpacity}; filter: drop-shadow(0 0 16px ${randomColor()}); }
        100% { opacity: ${minOpacity}; filter: drop-shadow(0 0 2px ${randomColor()}); }
      }`;
      document.head.appendChild(keyframes);
      starsContainer.appendChild(star);
    }

    // Generar 20 capas de pasto animado al frente de la montaña
    const montanaContenedor = document.getElementById('capas-pasto');
    for(let i=0; i<20; i++){
    const div = document.createElement('div');
    div.className = 'montana-capa';
    div.style.zIndex = 3 + i/20;
    div.style.animation = `viento-pasto${i} ${7+0.3*i}s ease-in-out infinite alternate`;
    // Colores más claros para el pasto
    const verdeClaro = 120 + i*3;
    const verde2Claro = 220 - i*2;
    const colorClaro = `rgb(${verdeClaro>255?255:verdeClaro},${verde2Claro>255?255:verde2Claro},120)`;
    // Elevar las capas sumando un desplazamiento negativo a los valores Y
  // Separar más las capas a medida que bajan
  // Desplazar más abajo y oscurecer progresivamente
  const yOffset = -12 + i * 2.7;
  // Color verde vivo al principio, más oscuro y saturado al final
  const verdeBase = 60;
  const verdeOscuro = 10;
  const verde = Math.round(verdeBase - (verdeBase-verdeOscuro)*(i/19));
  const verde2Base = 200;
  const verde2Oscuro = 60;
  const verde2 = Math.round(verde2Base - (verde2Base-verde2Oscuro)*(i/19));
  const colorGradual = `rgb(${verde},${verde2},30)`;
  div.innerHTML = `<svg viewBox='0 0 100 100' preserveAspectRatio='none' xmlns='http://www.w3.org/2000/svg'><path d='M0 ${100+yOffset} Q18 ${78+yOffset} 36 ${66+yOffset} Q52 ${50+yOffset} 68 ${60+yOffset} Q84 ${65+yOffset} 100 ${72+yOffset} L100 ${100+yOffset} L0 ${100+yOffset} Z' fill='${colorGradual}' opacity='${0.5+0.01*i}'/></svg>`;
      // Animación única para cada capa
      const style = document.createElement('style');
      style.innerHTML = `@keyframes viento-pasto${i} {
        0%   { transform: translateX(-50vw) skewX(${-2+i/5}deg) scaleY(1) scaleX(1); }
        50%  { transform: translateX(-50vw) skewX(${3-i/5}deg) scaleY(${1+0.02*i}) scaleX(${1+0.01*i}); }
        100% { transform: translateX(-50vw) skewX(${-2+i/5}deg) scaleY(1) scaleX(1); }
      }`;
      document.head.appendChild(style);
      montanaContenedor.appendChild(div);
    }


  </script>
</body>
</html>
